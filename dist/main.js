(()=>{"use strict";var t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};t.d({},{N:()=>A,I:()=>u});const e=["January","February","March","April","May","June","July","August","September","October","November","December"],n={today:new Date,year:(new Date).getFullYear(),month:(new Date).getMonth(),weekDay:(new Date).getDay(),dayOfMonth:(new Date).getDate()},o=document.querySelector(".add_todo_btn"),i=document.getElementById("btn_cancelTodo"),a=document.getElementById("btn_submitTodo"),r=document.querySelectorAll(".btn_changeMonth");o.addEventListener("click",s),i.addEventListener("click",s),a.addEventListener("click",(()=>{!function(){const t=document.querySelector(".input_todo.title").value;if(t.match(/^[a-z|[0-9]/i)){const e=document.querySelector(".input_todo.desc").value,n=document.querySelectorAll(".input_priority"),o=Array.from(n).filter((t=>1==t.checked))[0].dataset.priority;h().todos.push({todoName:t,todoDesc:e,priority:o,id:b(),open:!1,height:void 0}),!function(t){const e=document.querySelector(".todo_wrap_right"),n=function(t){const e=document.createElement("div");e.classList.add("todo"),e.setAttribute("data-id",t.id),e.innerHTML=`\n                            <div class="todo_Front">                        \n                                <div class="todo_title ${t.priority}" contenteditable="false">${t.todoName}</div>\n                                <div class="line_todoTitle ${t.priority}"></div>\n                                <p class="todo_desc preview">${t.todoDesc}</p>\n                            </div>\n                            <div class="todo_Back">\n                                <div class="temp">\n                                    <p class="todo_desc content" contenteditable="false">${t.todoDesc}</p>\n                                </div>\n                                <div class="todo_buttons_wrap">\n                                   \n                                    <div class="todo_btn shrink">\n                                        <img src="./img/Arrow up.svg" class="icon_btn arrow">\n                                    </div> \n<div class="todo_btn edit">\n                                        <div class="todo_btn btns_editWrap">\n                                            <div class="todo_btn subEdit">Save</div>\n                                            <div class="todo_btn canEdit">Cancel</div>\n                                         </div>\n                                         <img src="./img/pen_Edit.svg" class="icon_btn edit">\n                                    </div>\n                                                                        <div class="todo_btn delete">\n                                        <div class="line one"></div>\n                                        <div class="line two"></div>\n                                    </div>\n                                    <div class="todo_btn priority">\n                                        <div class="edit_PriorityWrap">\n                                            <input type="radio" name="${t.id}" class="edit_Priority low" id="low"></input>\n                                            <input type="radio" name="${t.id}" class="edit_Priority medium" id="medium"></input>\n                                            <input type="radio" name="${t.id}" class="edit_Priority high" id="high"></input>\n                                        </div>\n                                        <div class="mark_priorityEditBtn ${t.priority}"></div>\n                                    </div>  \n                                    \n                                </div> \n                            </div> \n                            <div class="todo_Trigger"></div>`;const n=e.querySelector(".todo_btn.priority"),o=e.querySelectorAll(".edit_Priority");return n.addEventListener("click",(t=>{t.currentTarget.classList.add("active"),t.stopImmediatePropagation()})),o.forEach((n=>n.addEventListener("click",(n=>{const o=n.currentTarget.parentElement.parentElement;v(n.currentTarget.id,t,e,o),n.stopImmediatePropagation()})))),o.forEach((e=>{e.id==t.priority&&(e.checked=!0)})),e.querySelector(".todo_Trigger").addEventListener("click",(e=>{p(e.currentTarget.parentElement,t),e.stopPropagation()})),e.querySelector(".todo_btn.delete").addEventListener("click",(e=>{e.currentTarget.parentElement.parentElement.parentElement.dataset.id;const n=e.currentTarget.parentElement.parentElement.parentElement;n.style.opacity="0%",n.style.height="0px",setTimeout((()=>{g(t.id),D(d.sel_Year,d.sel_Month)}),150),e.stopImmediatePropagation()})),e.querySelector(".todo_btn.shrink").addEventListener("click",(e=>{p(e.currentTarget.parentElement.parentElement.parentElement,t),e.stopImmediatePropagation()})),e.querySelector(".todo_btn.edit").addEventListener("click",(t=>{t.stopPropagation();const e=t.currentTarget.parentElement.parentElement.parentElement;_(e,e.dataset.id,!1)})),e.querySelector(".todo_btn.subEdit").addEventListener("click",(t=>{const e=t.currentTarget.parentElement.parentElement.parentElement.parentElement.parentElement;_(e,e.dataset.id,!1),t.stopImmediatePropagation()})),e.querySelector(".todo_btn.canEdit").addEventListener("click",(t=>{const e=t.currentTarget.parentElement.parentElement.parentElement.parentElement.parentElement;_(e,e.dataset.id,!0),t.stopImmediatePropagation()})),e.classList.add("added"),e}(t);e.appendChild(n),setTimeout((()=>{n.classList.remove("added")}),1)}(h().todos.filter((e=>e.todoName==t))[0]),c()}}(),D(d.sel_Year,d.sel_Month)})),r.forEach((t=>t.addEventListener("click",(t=>{!function(t){switch(t){case"prev":0==d.sel_Month?(d.sel_Month=11,d.sel_Year--):d.sel_Month--;break;case"now":d.sel_Year=n.year,d.sel_Month=n.month;break;case"next":11==d.sel_Month?(d.sel_Month=0,d.sel_Year++):d.sel_Month++}D(d.sel_Year,d.sel_Month)}(t.currentTarget.id)})))),document.addEventListener("keydown",(t=>{"Escape"==t.key&&i.click()}));const d={sel_Month:n.month,sel_Year:n.year};function s(){const t=document.getElementById("todo_template_right"),e=document.querySelector(".add_todo_btn");t.classList.contains("show")?(t.classList.remove("show"),c(),setTimeout((()=>{e.style.opacity="100%"}),60)):(e.style.opacity="0%",t.classList.add("show"))}function c(){const t=document.querySelector(".input_todo.title"),e=document.querySelector(".input_todo.desc"),n=document.querySelector(".input_priority.low");t.value="",e.value="",n.checked=!0,t.focus()}let l;function p(t,e){const n=t.querySelector(".todo_Trigger"),o=t.querySelector(".todo_desc.content"),i=t.querySelector(".todo_Front");if(t.classList.toggle("open"),t.classList.contains("open")){const e=64+i.getBoundingClientRect().height+o.getBoundingClientRect().height;l=e,t.style.height=`${e}px`}else t.style.height="50px",n.style.display="block",e.open=!1}let u,m="",y="";function _(t,e,n){t.classList.toggle("editing");const o=t.querySelector(".todo_title"),i=t.querySelector(".todo_desc.content"),a=t.querySelector(".todo_desc.preview"),r=t.querySelector(".todo_Trigger"),s=t.querySelector(".todo_Front"),c=t.querySelector(".btns_editWrap");if(t.classList.contains("editing"))return console.log("open edit"),o.setAttribute("contenteditable",!0),i.setAttribute("contenteditable",!0),s.style.justifyContent="space-between",t.style.height=`${l+15+50}px`,r.style.display="none",m=o.textContent,y=i.textContent,c.classList.add("flex"),void setTimeout((()=>{c.style.opacity="100%"}),150);if(!t.classList.contains("editing")&&1==n){console.log("cancel"),c.style.opacity="0%",setTimeout((()=>{c.classList.remove("flex"),s.style.justifyContent="left"}),301),o.setAttribute("contenteditable",!1),i.setAttribute("contenteditable",!1),t.style.height=`${l}px`,r.style.display="flex",r.style.zIndex="0";const n=h().todos.map((t=>(t.id==e&&(t.todoName=m,t.todoDesc=y,o.textContent=m,i.textContent=y,a.textContent=y),t)));return h().todos=n,void D(d.sel_Year,d.sel_Month)}if(!t.classList.contains("editing")){console.log("submit"),c.classList.remove("flex");const n=75+s.getBoundingClientRect().height+i.getBoundingClientRect().height;l=n,t.style.height=`${n}px`,o.setAttribute("contenteditable",!1),i.setAttribute("contenteditable",!1),r.style.display="flex",r.style.zIndex="0",setTimeout((()=>{s.style.justifyContent="left"}),301);const p=h().todos.map((t=>(t.id==e&&(t.todoName=o.textContent,t.todoDesc=i.textContent,a.textContent=i.textContent),t)));return h().todos=p,void D(d.sel_Year,d.sel_Month)}}function g(t){const e=h().todos.reduce(((e,n)=>(n.id!=t&&e.push(n),e)),[]);h().todos=e}function v(t,e,n,o){e.priority=t,D(d.sel_Year,d.sel_Month);const i=n.querySelector(".todo_title"),a=n.querySelector(".line_todoTitle"),r=n.querySelector(".mark_priorityEditBtn");i.className="",a.className="",r.className="",i.classList.add("todo_title"),a.classList.add("line_todoTitle"),r.classList.add("mark_priorityEditBtn"),i.classList.add(t),a.classList.add(t),r.classList.add(t),o.classList.remove("active")}function h(){const t=document.getElementById("title_Right").textContent;return u[0].day_Objects.filter((e=>e.title==t))[0]}function E(){0!=A&&u[0].day_Objects.forEach(((t,e)=>{0==t.todos.length&&t.title!=h().title&&u[0].day_Objects.splice(e,1)}))}function b(){let t=[];for(let e=0;e<50;e++)t+=Math.floor(10*Math.random());return parseInt(t)}function f(t){const e=t.getFullYear(),o=t.getMonth();return t.getDate()<n.dayOfMonth&&o==n.month&&e==n.year||o<n.month&&e==n.year||e<n.year}function L(t,e,n){const o=new Date(t,e,n).getDay();return 6==o||0==o}function S(t){return!!u[0].day_Objects.some((e=>e.title==t))}function k(t){const e=u[0].day_Objects.filter((e=>e.title==t))[0].todos;let n=[];for(let t=0;t<e.length;t++){const o=e[t].priority,i=document.createElement("p");i.textContent=e[t].todoName,i.classList.add("dayBox_todoTitle"),i.classList.add(o),n.push(i)}return n}function T(){const t=document.getElementById("title_Right").textContent,e=document.querySelector(".calender");Array.from(e.children).forEach((e=>{t==e.dataset.date?e.classList.add("selected"):e.classList.remove("selected")}))}function q(t){const e=u[0].day_Objects.filter((e=>e.title==t))[0];return null!=e&&e}function w(t){const e=document.querySelector(".todo_wrap_right");e.innerHTML="";const n=document.getElementById("title_Right");n.textContent=t.title,n.setAttribute("data-month",t.month),n.setAttribute("data-year",t.year),function(t){let e=[];return t.todos.forEach((t=>{const n=document.createElement("div");n.classList.add("todo"),n.setAttribute("data-ID",t.id),n.innerHTML=`\n                            <div class="todo_Front">                        \n                                <div class="todo_title ${t.priority}" contenteditable="false">${t.todoName}</div>\n                                <div class="line_todoTitle ${t.priority}"></div>\n                                <p class="todo_desc preview">${t.todoDesc}</p>\n                            </div>\n                            <div class="todo_Back">\n                                <div class="temp">\n                                    <p class="todo_desc content" contenteditable="false"> ${t.todoDesc}</p>\n                                </div>\n                                <div class="todo_buttons_wrap">\n                                   \n                                 <div class="todo_btn shrink">\n                                        <img src="./img/Arrow up.svg" class="icon_btn arrow">\n                                    </div> \n    <div class="todo_btn edit">\n                                        <div class="todo_btn btns_editWrap">\n                                            <div class="todo_btn subEdit">Save</div>\n                                            <div class="todo_btn canEdit">Cancel</div>\n                                         </div>\n                                         <img src="./img/pen_Edit.svg" class="icon_btn edit">\n                                    </div>\n                                                                       <div class="todo_btn delete">\n                                        <div class="line one"></div>\n                                        <div class="line two"></div>\n                                    </div>\n                                    <div class="todo_btn priority">\n                                        <div class="edit_PriorityWrap">\n                                            <input type="radio" name="${t.id}" class="edit_Priority low" id="low"></input>\n                                            <input type="radio" name="${t.id}" class="edit_Priority medium" id="medium"></input>\n                                            <input type="radio" name="${t.id}" class="edit_Priority high" id="high"></input>\n                                        </div>\n                                        <div class="mark_priorityEditBtn ${t.priority}"></div>\n                                    </div>  \n                                    \n                                </div> \n                            </div> \n                            <div class="todo_Trigger"></div>`;const o=n.querySelector(".todo_btn.priority"),i=n.querySelectorAll(".edit_Priority");o.addEventListener("click",(t=>{t.currentTarget.classList.add("active"),t.stopImmediatePropagation()})),i.forEach((e=>e.addEventListener("click",(e=>{const o=e.currentTarget.parentElement.parentElement;v(e.currentTarget.id,t,n,o),e.stopImmediatePropagation()})))),i.forEach((e=>{e.id==t.priority&&(e.checked=!0)})),n.querySelector(".todo_Trigger").addEventListener("click",(e=>{p(e.currentTarget.parentElement,t),e.stopPropagation()})),n.querySelector(".todo_btn.delete").addEventListener("click",(t=>{const e=t.currentTarget.parentElement.parentElement.parentElement.dataset.id,n=t.currentTarget.parentElement.parentElement.parentElement;n.style.opacity="0%",n.style.height="0px",setTimeout((()=>{n.style.display="none",g(e),D(d.sel_Year,d.sel_Month)}),150),t.stopImmediatePropagation()})),n.querySelector(".todo_btn.shrink").addEventListener("click",(e=>{p(e.currentTarget.parentElement.parentElement.parentElement,t),e.stopImmediatePropagation()})),n.querySelector(".todo_btn.btns_editWrap").addEventListener("click",(t=>{t.stopPropagation()})),n.querySelector(".todo_btn.edit").addEventListener("click",(t=>{t.stopPropagation();const e=t.currentTarget.parentElement.parentElement.parentElement;_(e,e.dataset.id,!1)})),n.querySelector(".todo_btn.subEdit").addEventListener("click",(t=>{const e=t.currentTarget.parentElement.parentElement.parentElement.parentElement.parentElement;_(e,e.dataset.id,!1),t.stopImmediatePropagation()})),n.querySelector(".todo_btn.canEdit").addEventListener("click",(t=>{const e=t.currentTarget.parentElement.parentElement.parentElement.parentElement.parentElement;_(e,e.dataset.id,!0),t.stopImmediatePropagation()})),e.push(n)})),e}(t).forEach((t=>{e.appendChild(t)}))}function D(t,o){E();const i=document.querySelector(".calender"),a=document.querySelector(".mainTitle"),r=new Date(t,o,0).getDay();i.innerHTML="",a.textContent=e[o]+" "+t,function(t){let e=[];for(let n=0;n<t;n++){const t=document.createElement("div");t.classList.add("blankDay"),e.push(t)}return e}(r).forEach((t=>{i.appendChild(t)})),new Date(t,o+1,0).getDate(),function(t,o){const i=new Date(o,t+1,0).getDate();let a=[];for(let s=1;s<i+1;s++){const i=document.createElement("p");i.classList.add("calNumber"),i.textContent=s;const c=document.createElement("div");c.classList.add("day"),c.setAttribute("data-date",`${s}. ${e[t]} ${o}`),c.setAttribute("data-day",s),c.appendChild(i);const l={html_DAY:c,title:`${s}. ${e[t]} ${o}`,type:"calDay",todos:[],date:new Date(o,t,s),year:o,month:t};c.addEventListener("click",(()=>{var t,e;t=l,q(e=l.html_DAY.dataset.date)?w(q(e)):(u[0].day_Objects.push(t),w(t)),T(),E()})),L(o,t,s)&&c.classList.add("weekendDay"),f(l.date)&&l.html_DAY.classList.add("day_passed"),S(l.title)&&k(l.title).forEach((t=>{l.html_DAY.appendChild(t)})),r=t,d=o,s==n.dayOfMonth&&r==n.month&&d==n.year&&l.html_DAY.classList.add("today"),a.push(c)}var r,d;return a}(o,t).forEach((t=>{i.appendChild(t)})),T(),localStorage.setItem("projects_ALL",JSON.stringify(u))}var A=!1;null!==localStorage.getItem("projects_ALL")||localStorage.setItem("projects_ALL",JSON.stringify([{name:"calProjects",day_Objects:[]},{name:"not_calProjects",objects:[]}])),u=JSON.parse(localStorage.getItem("projects_ALL")),D(n.year,n.month),A=!0,function(){const t=document.querySelector(".calender").children;Array.from(t).filter((t=>t.dataset.day==(new Date).getDate()))[0].click()}()})();